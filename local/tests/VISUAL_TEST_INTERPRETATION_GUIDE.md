# Visual Test Interpretation Guide

This guide explains how to interpret the complex multivariate derivative visualizations generated by the pydelt visual test suite.

## 1. 2D Scalar Gradient Surface (`multivariate_2d_scalar_gradient.html`)

**Function**: f(x,y) = x² + y² - 2xy

### Plot Interpretation:

#### Top-Left: Function Surface
- **What it shows**: The original 3D surface of the scalar function
- **Colors**: Represent function values (higher = warmer colors)
- **Purpose**: Shows the "landscape" we're analyzing derivatives on

#### Top-Right: Gradient Magnitude |∇f|
- **What it shows**: The steepness at each point
- **Formula**: |∇f| = √((∂f/∂x)² + (∂f/∂y)²)
- **Colors**: Higher values (red/yellow) = steeper slopes, Lower values (blue/purple) = flatter areas
- **Interpretation**: This tells you how fast the function is changing at each location

#### Bottom-Left: Gradient Vector Field
- **What it shows**: Direction and magnitude of steepest ascent
- **Red arrows**: Point in the direction of steepest increase
- **Arrow length**: Proportional to gradient magnitude
- **Interpretation**: If you were standing on the surface, these arrows show which way to walk uphill most efficiently

#### Bottom-Right: Gradient Components
- **Blue dots**: ∂f/∂x values (how function changes with x)
- **Red dots**: ∂f/∂y values (how function changes with y)
- **X-axis**: Position coordinates
- **Y-axis**: Partial derivative values
- **Interpretation**: Shows how each directional derivative varies across the domain

## 2. 2D Vector Field Jacobian (`multivariate_2d_vector_jacobian.html`)

**Vector Field**: F(x,y) = [x²-y², 2xy]

### Plot Interpretation:

#### Top-Left: Vector Field
- **Red arrows**: Show the vector field direction and magnitude
- **Arrow length**: Proportional to vector magnitude
- **Purpose**: Visualizes the original vector field we're analyzing

#### Top-Right: Divergence ∇·F
- **Formula**: ∇·F = ∂F₁/∂x + ∂F₂/∂y
- **Red regions**: Positive divergence (expansion/sources)
- **Blue regions**: Negative divergence (contraction/sinks)
- **Interpretation**: Shows where the vector field is expanding outward or contracting inward

#### Bottom-Left: Curl ∇×F
- **Formula**: ∇×F = ∂F₂/∂x - ∂F₁/∂y (2D curl)
- **Red regions**: Positive curl (counterclockwise rotation)
- **Blue regions**: Negative curl (clockwise rotation)
- **Interpretation**: Measures the local rotation tendency of the vector field

#### Bottom-Right: Jacobian Component ∂F₁/∂x
- **Shows**: How the first component of F changes with respect to x
- **Purpose**: Example of individual Jacobian matrix elements
- **Interpretation**: Part of the full Jacobian matrix that describes how the vector field deforms space

## 3. 3D Scalar Derivatives (`multivariate_3d_scalar_derivatives.html`)

**Function**: f(x,y,z) = x² + y² + z² - xy

### Plot Interpretation:

#### Left: 3D Sample Points
- **Dots**: Random sampling points in 3D space
- **Colors**: Function values at those points
- **Purpose**: Shows the training data used to fit the multivariate interpolator

#### Center: Gradient Magnitude (z=0 slice)
- **Shows**: |∇f| on the z=0 plane
- **Colors**: Steepness of the 3D function projected onto the z=0 slice
- **Interpretation**: How steep the 3D function is when restricted to the z=0 plane

#### Right: Laplacian (z=0 slice)
- **Formula**: ∇²f = ∂²f/∂x² + ∂²f/∂y² + ∂²f/∂z²
- **Red regions**: Positive Laplacian (local minima, concave up)
- **Blue regions**: Negative Laplacian (local maxima, concave down)
- **Interpretation**: Shows curvature and identifies potential extrema in the function

## 4. Interpolator Comparison (`multivariate_interpolator_comparison.html`)

**Test Function**: f(x,y) = sin(x)cos(y)

### Plot Interpretation:

#### Top Row: Ground Truth
- **Left**: Original function surface
- **Center**: Analytical ∂f/∂x = cos(x)cos(y)
- **Right**: Analytical Laplacian ∇²f = -2sin(x)cos(y)
- **Purpose**: Provides the "correct answers" for comparison

#### Bottom Row: Numerical Methods
- **Left**: Spline interpolator result for ∂f/∂x
- **Center**: LLA interpolator result for ∂f/∂x
- **Right**: Error distribution histogram
- **Purpose**: Shows how well each numerical method approximates the analytical solution

#### Error Histogram
- **X-axis**: Absolute error magnitude
- **Y-axis**: Frequency of that error level
- **Interpretation**: Lower, narrower distributions = better accuracy

## Key Mathematical Concepts

### Gradient (∇f)
- **Physical meaning**: Direction of steepest ascent
- **Components**: [∂f/∂x, ∂f/∂y, ∂f/∂z]
- **Applications**: Optimization, physics (forces), image processing

### Jacobian (J)
- **Physical meaning**: How a vector field deforms space
- **Matrix elements**: J[i,j] = ∂F_i/∂x_j
- **Applications**: Robotics, fluid dynamics, coordinate transformations

### Divergence (∇·F)
- **Physical meaning**: Net flow out of a point
- **Formula**: Sum of diagonal Jacobian elements
- **Applications**: Fluid flow, electromagnetism (Gauss's law)

### Curl (∇×F)
- **Physical meaning**: Local rotation tendency
- **2D formula**: ∂F₂/∂x - ∂F₁/∂y
- **Applications**: Fluid vorticity, electromagnetic fields

### Laplacian (∇²f)
- **Physical meaning**: Measure of local curvature
- **Formula**: Sum of second partial derivatives
- **Applications**: Heat equation, wave equation, potential theory

## Color Scale Interpretations

- **Viridis**: Purple (low) → Green → Yellow (high)
- **Plasma**: Purple (low) → Pink → Yellow (high)
- **RdBu**: Blue (negative) → White (zero) → Red (positive)

## Common Patterns to Look For

1. **Gradient vectors point away from minima, toward maxima**
2. **High divergence regions are sources, low divergence are sinks**
3. **Curl shows rotational patterns in vector fields**
4. **Laplacian positive at minima, negative at maxima**
5. **Error histograms should be concentrated near zero for good methods**

## Important Limitations of Numerical Methods

### Critical Point Smoothing
Numerical interpolation methods (splines, local linear approximation, etc.) have important limitations when dealing with critical points and sharp mathematical features:

**Example: f(x,y) = x² + y² - 2xy = (x-y)²**
- **Mathematical truth**: Zero gradient along the line x = y, especially at corners (-3,-3) and (3,3)
- **Numerical reality**: Interpolation smooths out these zeros, giving non-zero gradients everywhere
- **Visual impact**: You may see high gradient magnitudes in all 4 corners instead of just 2

### Why This Happens:
1. **Smoothing effects**: Interpolation methods assume smooth, continuous derivatives
2. **Boundary artifacts**: Edge effects can distort gradient calculations
3. **Finite sampling**: Discrete data points cannot capture infinitely sharp transitions
4. **Regularization**: Smoothing parameters prevent overfitting but blur sharp features

### How to Identify These Issues:
- Compare numerical results with analytical solutions when available
- Look for unexpectedly uniform gradient magnitudes
- Check if critical points (minima, maxima, saddle points) have non-zero gradients
- Examine boundary regions carefully

### Mitigation Strategies:
- Use higher resolution sampling near critical points
- Reduce smoothing parameters (but beware of overfitting)
- Consider neural network methods with automatic differentiation for exact derivatives
- Validate against analytical solutions when possible

### When to Be Cautious:
- Functions with sharp valleys or ridges
- Optimization problems where exact critical points matter
- Physical simulations requiring precise derivative calculations
- Boundary value problems

This guide should help you understand what each visualization is showing and how to interpret the mathematical concepts being demonstrated, while being aware of the limitations of numerical methods.
